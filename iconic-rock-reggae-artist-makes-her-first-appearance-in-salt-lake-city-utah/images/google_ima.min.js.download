!function o(a,s,l){function d(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return d(a[t][1][e]||e)},r,r.exports,o,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)d(l[e]);return d}({1:[function(e,t,n){OO||(OO={})},{}],2:[function(e,t,n){e("./InitOO.js"),window._||(window._=e("underscore")),OO._||(OO._=window._.noConflict())},{"./InitOO.js":1,underscore:5}],3:[function(e,t,n){var i,r;i=OO,r=OO._,i.STATE={LOADING:"loading",READY:"ready",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",ERROR:"error",DESTROYED:"destroyed",__end_marker:!0},i.EVENTS={PLAYER_CREATED:"playerCreated",PLAYER_EMBEDDED:"playerEmbedded",SET_EMBED_CODE:"setEmbedCode",HEVC_CHECKED:"hevcChecked",SET_EMBED_CODE_AFTER_OOYALA_AD:"setEmbedCodeAfterOoyalaAd",EMBED_CODE_CHANGED:"embedCodeChanged",SET_ASSET:"setAsset",ASSET_CHANGED:"assetChanged",UPDATE_ASSET:"updateAsset",ASSET_UPDATED:"assetUpdated",AUTH_TOKEN_CHANGED:"authTokenChanged",GUID_SET:"guidSet",WILL_FETCH_PLAYER_XML:"willFetchPlayerXml",PLAYER_XML_FETCHED:"playerXmlFetched",WILL_FETCH_CONTENT_TREE:"willFetchContentTree",SAVE_PLAYER_SETTINGS:"savePlayerSettings",CONTENT_TREE_FETCHED:"contentTreeFetched",WILL_FETCH_METADATA:"willFetchMetadata",METADATA_FETCHED:"metadataFetched",SKIN_METADATA_FETCHED:"skinMetadataFetched",THUMBNAILS_FETCHED:"thumbnailsFetched",WILL_FETCH_AUTHORIZATION:"willFetchAuthorization",AUTHORIZATION_FETCHED:"authorizationFetched",WILL_FETCH_AD_AUTHORIZATION:"willFetchAdAuthorization",AD_AUTHORIZATION_FETCHED:"adAuthorizationFetched",CAN_SEEK:"canSeek",WILL_RESUME_MAIN_VIDEO:"willResumeMainVideo",PLAYBACK_READY:"playbackReady",INITIAL_PLAY:"initialPlay",WILL_PLAY:"willPlay",REPLAY:"replay",SET_PLAYBACK_SPEED:"setPlaybackSpeed",PLAYBACK_SPEED_CHANGED:"playbackSpeedChanged",PLAYHEAD_TIME_CHANGED:"playheadTimeChanged",BUFFERING:"buffering",BUFFERED:"buffered",DOWNLOADING:"downloading",BITRATE_INFO_AVAILABLE:"bitrateInfoAvailable",SET_TARGET_BITRATE:"setTargetBitrate",BITRATE_CHANGED:"bitrateChanged",CLOSED_CAPTIONS_INFO_AVAILABLE:"closedCaptionsInfoAvailable",SET_CLOSED_CAPTIONS_LANGUAGE:"setClosedCaptionsLanguage",SKIN_UI_LANGUAGE:"skinUiLanguage",CLOSED_CAPTION_CUE_CHANGED:"closedCaptionCueChanged",ASSET_DIMENSION:"assetDimension",SCRUBBING:"scrubbing",SCRUBBED:"scrubbed",SEEK:"seek",SEEKED:"seeked",PLAY:"play",PLAYING:"playing",PLAY_FAILED:"playFailed",PAUSE:"pause",PAUSED:"paused",PLAYED:"played",DISPLAY_CUE_POINTS:"displayCuePoints",INSERT_CUE_POINT:"insertCuePoint",RESET_CUE_POINTS:"resetCuePoints",WILL_CHANGE_FULLSCREEN:"willChangeFullscreen",FULLSCREEN_CHANGED:"fullscreenChanged",SIZE_CHANGED:"sizeChanged",CHANGE_VOLUME:"changeVolume",VOLUME_CHANGED:"volumeChanged",CHANGE_MUTE_STATE:"changeMuteState",MUTE_STATE_CHANGED:"muteStateChanged",CONTROLS_SHOWN:"controlsShown",CONTROLS_HIDDEN:"controlsHidden",END_SCREEN_SHOWN:"endScreenShown",ERROR:"error",API_ERROR:"apiError",BITRATE_INITIAL:"bitrateInitial",BITRATE_FIVE_SEC:"bitrateFiveSec",BITRATE_STABLE:"bitrateStable",PLAYBACK_START_ERROR:"playbackStartError",PLAYBACK_MIDSTREAM_ERROR:"playbackMidstreamError",PLUGIN_LOADED:"pluginLoaded",VC_PLUGIN_ERROR:"videoPluginError",INITIAL_PLAY_STARTING:"initialPlayStarting",REQUEST_PREVIOUS_VIDEO:"requestPreviousVideo",REQUEST_NEXT_VIDEO:"requestNextVideo",POSITION_IN_PLAYLIST_DETERMINED:"positionInPlaylistDetermined",DESTROY:"destroy",WILL_PLAY_FROM_BEGINNING:"willPlayFromBeginning",DISABLE_PLAYBACK_CONTROLS:"disablePlaybackControls",ENABLE_PLAYBACK_CONTROLS:"enablePlaybackControls",VC_READY:"videoControllerReady",VC_CREATE_VIDEO_ELEMENT:"videoControllerCreateVideoElement",VC_UPDATE_ELEMENT_STREAM:"videoControllerUpdateElementStream",VC_VIDEO_ELEMENT_CREATED:"videoControllerVideoElementCreated",VC_FOCUS_VIDEO_ELEMENT:"videoControllerFocusVideoElement",VC_VIDEO_ELEMENT_IN_FOCUS:"videoControllerVideoElementInFocus",VC_VIDEO_ELEMENT_LOST_FOCUS:"videoControllerVideoElementLostFocus",VC_DISPOSE_VIDEO_ELEMENT:"videoControllerDisposeVideoElement",VC_VIDEO_ELEMENT_DISPOSED:"videoControllerVideoElementDisposed",VC_SET_VIDEO_STREAMS:"videoControllerSetVideoStreams",VC_ERROR:"videoControllerError",VC_SET_INITIAL_TIME:"videoSetInitialTime",VC_PLAY:"videoPlay",PLAY_VIDEO_ELEMENT:"playVideoElement",VC_WILL_PLAY:"videoWillPlay",VC_PLAYING:"videoPlaying",VC_PLAYED:"videoPlayed",VC_PLAY_FAILED:"videoPlayFailed",VC_PAUSE:"videoPause",VC_PAUSED:"videoPaused",VC_SEEK:"videoSeek",VC_SEEKING:"videoSeeking",VC_SEEKED:"videoSeeked",VC_PRELOAD:"videoPreload",VC_RELOAD:"videoReload",VC_PRIME_VIDEOS:"videoPrimeVideos",VC_TAG_FOUND:"videoTagFound",INITIAL_PLAY_STARTING:"initialPlayStarting",AD_SDK_LOADED:"adSdkLoaded",AD_SDK_LOAD_FAILED:"adSdkLoadFailed",AD_REQUEST:"adRequest",AD_REQUEST_SUCCESS:"adRequestSuccess",AD_REQUEST_ERROR:"adRequestError",AD_REQUEST_EMPTY:"adRequestEmpty",AD_PLAYBACK_ERROR:"adPlaybackError",AD_SDK_IMPRESSION:"adSdkImpression",AD_COMPLETED:"adCompleted",WILL_FETCH_ADS:"willFetchAds",DISABLE_SEEKING:"disableSeeking",ENABLE_SEEKING:"enableSeeking",WILL_PLAY_ADS:"willPlayAds",WILL_PLAY_SINGLE_AD:"willPlaySingleAd",WILL_PAUSE_ADS:"willPauseAds",WILL_RESUME_ADS:"willResumeAds",WILL_PLAY_NONLINEAR_AD:"willPlayNonlinearAd",PLAY_NONLINEAR_AD:"playNonlinearAd",NONLINEAR_AD_DISPLAYED:"nonlinearAdDisplayed",ADS_PLAYED:"adsPlayed",SINGLE_AD_PLAYED:"singleAdPlayed",ADS_ERROR:"adsError",ADS_CLICKED:"adsClicked",FIRST_AD_FETCHED:"firstAdFetched",AD_CONFIG_READY:"adConfigReady",WILL_SHOW_COMPANION_ADS:"willShowCompanionAds",AD_FETCH_FAILED:"adFetchFailed",MIDROLL_PLAY_FAILED:"midrollPlayFailed",SKIP_AD:"skipAd",UPDATE_AD_COUNTDOWN:"updateAdCountdown",REPORT_EXPERIMENT_VARIATIONS:"reportExperimentVariations",FETCH_STYLE:"fetchStyle",STYLE_FETCHED:"styleFetched",SET_STYLE:"setStyle",USE_SERVER_SIDE_HLS_ADS:"useServerSideHlsAds",LOAD_ALL_VAST_ADS:"loadAllVastAds",ADS_FILTERED:"adsFiltered",ADS_MANAGER_HANDLING_ADS:"adsManagerHandlingAds",ADS_MANAGER_FINISHED_ADS:"adsManagerFinishedAds",OVERLAY_RENDERING:"overlayRendering",SHOW_AD_CONTROLS:"showAdControls",SHOW_AD_MARQUEE:"showAdMarquee",SDK_AD_EVENT:"sdkAdEvent",PAGE_UNLOAD_REQUESTED:"pageUnloadRequested",PAGE_PROBABLY_UNLOADING:"pageProbablyUnloading",REPORT_DISCOVERY_IMPRESSION:"reportDiscoveryImpression",REPORT_DISCOVERY_CLICK:"reportDiscoveryClick",DISCOVERY_API:{SEND_DISPLAY_EVENT:"sendDisplayEvent",SEND_CLICK_EVENT:"sendClickEvent"},PLAYLISTS_READY:"playlistReady",VIDEO_TYPE_CHANGED:"videoTypeChanged",UI_READY:"uiReady",__end_marker:!0},i.ERROR={API:{NETWORK:"network",SAS:{GENERIC:"sas",GEO:"geo",DOMAIN:"domain",FUTURE:"future",PAST:"past",DEVICE:"device",PROXY:"proxy",CONCURRENT_STREAMS:"concurrent_streams",INVALID_HEARTBEAT:"invalid_heartbeat",ERROR_DEVICE_INVALID_AUTH_TOKEN:"device_invalid_auth_token",ERROR_DEVICE_LIMIT_REACHED:"device_limit_reached",ERROR_DEVICE_BINDING_FAILED:"device_binding_failed",ERROR_DEVICE_ID_TOO_LONG:"device_id_too_long",ERROR_DRM_RIGHTS_SERVER_ERROR:"drm_server_error",ERROR_DRM_GENERAL_FAILURE:"drm_general_failure",ERROR_INVALID_ENTITLEMENTS:"invalid_entitlements"},CONTENT_TREE:"content_tree",METADATA:"metadata"},PLAYBACK:{GENERIC:"playback",STREAM:"stream",LIVESTREAM:"livestream",NETWORK:"network_error"},CHROMECAST:{MANIFEST:"chromecast_manifest",MEDIAKEYS:"chromecast_mediakeys",NETWORK:"chromecast_network",PLAYBACK:"chromecast_playback"},UNPLAYABLE_CONTENT:"unplayable_content",INVALID_EXTERNAL_ID:"invalid_external_id",EMPTY_CHANNEL:"empty_channel",EMPTY_CHANNEL_SET:"empty_channel_set",CHANNEL_CONTENT:"channel_content",VC:{UNSUPPORTED_ENCODING:"unsupported_encoding",UNABLE_TO_CREATE_VIDEO_ELEMENT:"unable_to_create_video_element"},MEDIA:{MEDIA_ERR_ABORTED:"aborted",MEDIA_ERR_NETWORK:"network_error",MEDIA_ERR_DECODE:"decode_error",MEDIA_ERR_SRC_NOT_SUPPORTED:"unsupported_source"}},i.URLS={VAST_PROXY:r.template("http://player.ooyala.com/nuplayer/mobile_vast_ads_proxy?callback=<%=cb%>&embed_code=<%=embedCode%>&expires=<%=expires%>&tag_url=<%=tagUrl%>"),EXTERNAL_ID:r.template("<%=server%>/player_api/v1/content_tree/external_id/<%=pcode%>/<%=externalId%>"),CONTENT_TREE:r.template("<%=server%>/player_api/v1/content_tree/embed_code/<%=pcode%>/<%=embedCode%>"),METADATA:r.template("<%=server%>/player_api/v1/metadata/embed_code/<%=playerBrandingId%>/<%=embedCode%>?videoPcode=<%=pcode%>"),SAS:r.template("<%=server%>/player_api/v1/authorization/embed_code/<%=pcode%>/<%=embedCode%>"),ANALYTICS:r.template("<%=server%>/reporter.js"),THUMBNAILS:r.template("<%=server%>/api/v1/thumbnail_images/<%=embedCode%>"),__end_marker:!0},i.TRACKING_LEVEL={DEFAULT:"default",ANONYMOUS:"anonymous",DISABLED:"disabled"},i.PLUGINS={ADS:"ads",VIDEO:"video",ANALYTICS:"analytics",PLAYLIST:"playlist",SKIN:"skin"},i.VIDEO={MAIN:"main",ADS:"ads",ENCODING:{DRM:{HLS:"hls_drm",DASH:"dash_drm"},AUDIO:"audio",AUDIO_OGG:"audio_ogg",AUDIO_M4A:"audio_m4a",AUDIO_HLS:"audio_hls",DASH:"dash",HDS:"hds",HLS:"hls",IMA:"ima",PULSE:"pulse",MP4:"mp4",YOUTUBE:"youtube",RTMP:"rtmp",SMOOTH:"smooth",WEBM:"webm",AKAMAI_HD_VOD:"akamai_hd_vod",AKAMAI_HD2_VOD_HLS:"akamai_hd2_vod_hls",AKAMAI_HD2_VOD_HDS:"akamai_hd2_vod_hds",AKAMAI_HD2_HDS:"akamai_hd2_hds",AKAMAI_HD2_HLS:"akamai_hd2_hls",FAXS_HLS:"faxs_hls",WIDEVINE_HLS:"wv_hls",WIDEVINE_MP4:"wv_mp4",WIDEVINE_WVM:"wv_wvm",UNKNOWN:"unknown"},FEATURE:{CLOSED_CAPTIONS:"closedCaptions",VIDEO_OBJECT_SHARING_GIVE:"videoObjectSharingGive",VIDEO_OBJECT_SHARING_TAKE:"videoObjectSharingTake",BITRATE_CONTROL:"bitrateControl"},TECHNOLOGY:{FLASH:"flash",HTML5:"html5",MIXED:"mixed",OTHER:"other"}},i.CSS={VISIBLE_POSITION:"0px",INVISIBLE_POSITION:"-100000px",VISIBLE_DISPLAY:"block",INVISIBLE_DISPLAY:"none",VIDEO_Z_INDEX:1e4,SUPER_Z_INDEX:2e4,ALICE_SKIN_Z_INDEX:11e3,OVERLAY_Z_INDEX:10500,TRANSPARENT_COLOR:"rgba(255, 255, 255, 0)",__end_marker:!0},i.TEMPLATES={RANDOM_PLACE_HOLDER:["[place_random_number_here]","<now>","[timestamp]","<rand-num>","[cache_buster]","[random]"],REFERAK_PLACE_HOLDER:["[referrer_url]","[LR_URL]","[description_url]"],EMBED_CODE_PLACE_HOLDER:["[oo_embedcode]"],MESSAGE:'                  <table width="100%" height="100%" bgcolor="black" style="padding-left:55px; padding-right:55px;                   background-color:black; color: white;">                  <tbody>                  <tr valign="middle">                  <td align="right"><span style="font-family:Arial; font-size:20px">                  <%= message %>                  </span></td></tr></tbody></table>                  ',__end_marker:!0},i.CONSTANTS={AD_PLAY_COUNT_KEY:"oo_ad_play_count",AD_ID_TO_PLAY_COUNT_DIVIDER:":",AD_PLAY_COUNT_DIVIDER:"|",MAX_AD_PLAY_COUNT_HISTORY_LENGTH:20,CONTROLS_BOTTOM_PADDING:10,SEEK_TO_END_LIMIT:3,PLAYER_TYPE:{VIDEO:"video",AUDIO:"audio"},HEVC_CODEC:{HEV1:"hev1",HVC1:"hvc1"},CLOSED_CAPTIONS:{SHOWING:"showing",HIDDEN:"hidden",DISABLED:"disabled"},OOYALA_PLAYER_SETTINGS_KEY:"ooyala_player_settings",PLAYBACK_SPEED:{MIN:.5,MAX:2},__end_marker:!0}},{}],4:[function(e,t,n){!function(s,o,r){s.getRandomString=function(){return Math.random().toString(36).substring(7)},s.safeClone=function(e){if(o.isNumber(e)||o.isString(e)||o.isBoolean(e)||o.isFunction(e)||o.isNull(e)||o.isUndefined(e))return e;var t=e instanceof Array?[]:{};try{r.extend(!0,t,e)}catch(e){s.log("deep clone error",e)}return t},s.d=function(){s.isDebug&&s.log.apply(s,arguments),s.$("#OOYALA_DEBUG_CONSOLE").append(JSON.stringify(s.safeClone(arguments))+"<br>")},s.inherit=function(e,t){if("function"!=typeof e)return s.log("invalid inherit, ParentClass need to be a class",e),null;var n=function(){e.apply(this,arguments),"function"==typeof t&&t.apply(this,arguments)},i=new e;return s._.extend(n.prototype,i),n.prototype.parentClass=i,n};var i={};s.attachStyle=function(e,t){var n=r('<style type="text/css">'+e+"</style>").appendTo("head");i[t]=i[t]||[],i[t].push(n)},s.removeStyles=function(e){s._.each(i[e],function(e){e.remove()})},s.getInnerProperty=function(e,t){for(var n=e,i=t;0<i.length;){var r=i.shift();if(o.isNull(n)||!o.isObject(n)||o.isFunction(n)||o.isArray(n))return null;n=n[r]}return n},s.formatSeconds=function(e){var t=parseInt(e,10)%60,n=parseInt(e/3600,10),i=parseInt((e-3600*n)/60,10);return n<10&&(n="0"+n),i<10&&(i="0"+i),t<10&&(t="0"+t),0<parseInt(n,10)?n+":"+i+":"+t:i+":"+t},s.timeStringToSeconds=function(e){var t=(e||"").split(":");return o.reduce(t,function(e,t){return 60*e+parseInt(t,10)},0)},s.leftPadding=function(e,t){for(var n=e?e.toString():"";n.length<t;)n="0"+n;return n},s.getColorString=function(e){return"#"+s.leftPadding(e.toString(16),6).toUpperCase()},s.hexToRgb=function(e){return[(16711680&e)>>16,(65280&e)>>8,255&e]},s.changeColor=function(e,t,n){var i=n?Math.max:Math.min,r=n?0:255,o=Math.round(255*t)*(n?-1:1),a=s.hexToRgb(e);return[s.leftPadding(i(a[0]+o,r).toString(16),2),s.leftPadding(i(a[1]+o,r).toString(16),2),s.leftPadding(i(a[2]+o,r).toString(16),2)].join("")},s.decode64=function(e){e=e.replace(/\n/g,"");var t,n="",i=0,r=[];if(window.atob)return atob(e);do{for(t=0;t<4;t++)r[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++));n+=String.fromCharCode(r[0]<<2|r[1]>>4,64==r[2]?0:(15&r[1])<<4|r[2]>>2,64==r[3]?0:(3&r[2])<<6|r[3])}while(i<e.length);return n.replace(/\0/g,"")},s.pixelPing=function(e){var t=new Image;t.onerror=t.onabort=function(){s.d("onerror:",e)},t.src=s.getNormalizedTagUrl(e)},s.pixelPings=function(e){o.isEmpty(e)||o.each(e,function(e){s.pixelPing(e)},this)},s.stringToBoolean=function(e){return"string"==typeof e?-1<e.toLowerCase().indexOf("true")||-1<e.toLowerCase().indexOf("yes"):!!e},s.regexEscape=function(e){return e.replace(/[<>()\[\]{}]/g,"\\$&")},s.getNormalizedTagUrl=function(i,e){var t=(new Date).getTime(),n=escape(document.URL),r=function(e,n){o.each(e,function(e){var t=new RegExp("("+s.regexEscape(e)+")","gi");i=i.replace(t,n)},this)};return r(s.TEMPLATES.RANDOM_PLACE_HOLDER,t),r(s.TEMPLATES.REFERAK_PLACE_HOLDER,n),e&&r(s.TEMPLATES.EMBED_CODE_PLACE_HOLDER,e),i},s.safeSeekRange=function(e){return{start:0<e.length?e.start(0):0,end:0<e.length?e.end(0):0}},s.loadedJS=s.loadedJS||{},s.jsOnSuccessList=s.jsOnSuccessList||{},s.safeFuncCall=function(e){if("function"==typeof e)try{e.apply()}catch(e){s.log("Can not invoke function!",e)}},s.loadScriptOnce=function(e,t,n,i){return s.jsOnSuccessList[e]=s.jsOnSuccessList[e]||[],s.loadedJS[e]?("loaded"===s.loadedJS[e]?s.safeFuncCall(t):"loading"===s.loadedJS[e]&&s.jsOnSuccessList[e].unshift(t),!1):(s.loadedJS[e]="loading",r.ajax({url:e,type:"GET",cache:!0,dataType:"script",timeout:i||15e3,success:function(){s.loadedJS[e]="loaded",s.jsOnSuccessList[e].unshift(t),s._.each(s.jsOnSuccessList[e],function(e){s.safeFuncCall(e)},this),s.jsOnSuccessList[e]=[]},error:function(){s.safeFuncCall(n)}}),!0)};try{s.localStorage=window.localStorage}catch(e){s.log(e)}s.localStorage||(s.localStorage={getItem:function(e){return e&&this.hasOwnProperty(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(e){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[e])},setItem:function(e,t){e&&(document.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(e){e&&this.hasOwnProperty(e)&&(document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},s.localStorage.length=(document.cookie.match(/\=/g)||s.localStorage).length),s.setItem=function(e,t){try{s.localStorage.setItem(e,t)}catch(e){s.log(e)}},s.ensureNumber=function(e,t){var n;return(null===e||o.isArray(e))&&(e=NaN),n=o.isNumber(e)?e:Number(e),isFinite(n)?n:void 0===t?null:t},s.JSON=window.JSON}(OO,OO._,OO.$)},{}],5:[function(e,X,J){(function(z){!function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof z&&z.global===z&&z||this||{},t=e._,i=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,r=i.push,l=i.slice,E=a.toString,o=a.hasOwnProperty,n=Array.isArray,s=Object.keys,d=Object.create,u=function(){},A=function(e){return e instanceof A?e:this instanceof A?void(this._wrapped=e):new A(e)};void 0===J||J.nodeType?e._=A:(void 0!==X&&!X.nodeType&&X.exports&&(J=X.exports=A),J._=A),A.VERSION="1.9.1";var h,f=function(r,o,e){if(void 0===o)return r;switch(null==e?3:e){case 1:return function(e){return r.call(o,e)};case 3:return function(e,t,n){return r.call(o,e,t,n)};case 4:return function(e,t,n,i){return r.call(o,e,t,n,i)}}return function(){return r.apply(o,arguments)}},_=function(e,t,n){return A.iteratee!==h?A.iteratee(e,t):null==e?A.identity:A.isFunction(e)?f(e,t,n):A.isObject(e)&&!A.isArray(e)?A.matcher(e):A.property(e)};A.iteratee=h=function(e,t){return _(e,t,1/0)};var p=function(r,o){return o=null==o?r.length-1:+o,function(){for(var e=Math.max(arguments.length-o,0),t=Array(e),n=0;n<e;n++)t[n]=arguments[n+o];switch(o){case 0:return r.call(this,t);case 1:return r.call(this,arguments[0],t);case 2:return r.call(this,arguments[0],arguments[1],t)}var i=Array(o+1);for(n=0;n<o;n++)i[n]=arguments[n];return i[o]=t,r.apply(this,i)}},g=function(e){if(!A.isObject(e))return{};if(d)return d(e);u.prototype=e;var t=new u;return u.prototype=null,t},T=function(t){return function(e){return null==e?void 0:e[t]}},O=function(e,t){return null!=e&&o.call(e,t)},I=function(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0},m=Math.pow(2,53)-1,S=T("length"),y=function(e){var t=S(e);return"number"==typeof t&&0<=t&&t<=m};A.each=A.forEach=function(e,t,n){var i,r;if(t=f(t,n),y(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var o=A.keys(e);for(i=0,r=o.length;i<r;i++)t(e[o[i]],o[i],e)}return e},A.map=A.collect=function(e,t,n){t=_(t,n);for(var i=!y(e)&&A.keys(e),r=(i||e).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=t(e[s],s,e)}return o};var D=function(l){return function(e,t,n,i){var r=3<=arguments.length;return function(e,t,n,i){var r=!y(e)&&A.keys(e),o=(r||e).length,a=0<l?0:o-1;for(i||(n=e[r?r[a]:a],a+=l);0<=a&&a<o;a+=l){var s=r?r[a]:a;n=t(n,e[s],s,e)}return n}(e,f(t,i,4),n,r)}};A.reduce=A.foldl=A.inject=D(1),A.reduceRight=A.foldr=D(-1),A.find=A.detect=function(e,t,n){var i=(y(e)?A.findIndex:A.findKey)(e,t,n);if(void 0!==i&&-1!==i)return e[i]},A.filter=A.select=function(e,i,t){var r=[];return i=_(i,t),A.each(e,function(e,t,n){i(e,t,n)&&r.push(e)}),r},A.reject=function(e,t,n){return A.filter(e,A.negate(_(t)),n)},A.every=A.all=function(e,t,n){t=_(t,n);for(var i=!y(e)&&A.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(!t(e[a],a,e))return!1}return!0},A.some=A.any=function(e,t,n){t=_(t,n);for(var i=!y(e)&&A.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(t(e[a],a,e))return!0}return!1},A.contains=A.includes=A.include=function(e,t,n,i){return y(e)||(e=A.values(e)),("number"!=typeof n||i)&&(n=0),0<=A.indexOf(e,t,n)},A.invoke=p(function(e,n,i){var r,o;return A.isFunction(n)?o=n:A.isArray(n)&&(r=n.slice(0,-1),n=n[n.length-1]),A.map(e,function(e){var t=o;if(!t){if(r&&r.length&&(e=I(e,r)),null==e)return;t=e[n]}return null==t?t:t.apply(e,i)})}),A.pluck=function(e,t){return A.map(e,A.property(t))},A.where=function(e,t){return A.filter(e,A.matcher(t))},A.findWhere=function(e,t){return A.find(e,A.matcher(t))},A.max=function(e,i,t){var n,r,o=-1/0,a=-1/0;if(null==i||"number"==typeof i&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=y(e)?e:A.values(e)).length;s<l;s++)null!=(n=e[s])&&o<n&&(o=n);else i=_(i,t),A.each(e,function(e,t,n){r=i(e,t,n),(a<r||r===-1/0&&o===-1/0)&&(o=e,a=r)});return o},A.min=function(e,i,t){var n,r,o=1/0,a=1/0;if(null==i||"number"==typeof i&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=y(e)?e:A.values(e)).length;s<l;s++)null!=(n=e[s])&&n<o&&(o=n);else i=_(i,t),A.each(e,function(e,t,n){((r=i(e,t,n))<a||r===1/0&&o===1/0)&&(o=e,a=r)});return o},A.shuffle=function(e){return A.sample(e,1/0)},A.sample=function(e,t,n){if(null==t||n)return y(e)||(e=A.values(e)),e[A.random(e.length-1)];var i=y(e)?A.clone(e):A.values(e),r=S(i);t=Math.max(Math.min(t,r),0);for(var o=r-1,a=0;a<t;a++){var s=A.random(a,o),l=i[a];i[a]=i[s],i[s]=l}return i.slice(0,t)},A.sortBy=function(e,i,t){var r=0;return i=_(i,t),A.pluck(A.map(e,function(e,t,n){return{value:e,index:r++,criteria:i(e,t,n)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var C=function(a,t){return function(i,r,e){var o=t?[[],[]]:{};return r=_(r,e),A.each(i,function(e,t){var n=r(e,t,i);a(o,e,n)}),o}};A.groupBy=C(function(e,t,n){O(e,n)?e[n].push(t):e[n]=[t]}),A.indexBy=C(function(e,t,n){e[n]=t}),A.countBy=C(function(e,t,n){O(e,n)?e[n]++:e[n]=1});var R=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;A.toArray=function(e){return e?A.isArray(e)?l.call(e):A.isString(e)?e.match(R):y(e)?A.map(e,A.identity):A.values(e):[]},A.size=function(e){return null==e?0:y(e)?e.length:A.keys(e).length},A.partition=C(function(e,t,n){e[n?0:1].push(t)},!0),A.first=A.head=A.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:A.initial(e,e.length-t)},A.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},A.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:A.rest(e,Math.max(0,e.length-t))},A.rest=A.tail=A.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},A.compact=function(e){return A.filter(e,Boolean)};var v=function(e,t,n,i){for(var r=(i=i||[]).length,o=0,a=S(e);o<a;o++){var s=e[o];if(y(s)&&(A.isArray(s)||A.isArguments(s)))if(t)for(var l=0,d=s.length;l<d;)i[r++]=s[l++];else v(s,t,n,i),r=i.length;else n||(i[r++]=s)}return i};A.flatten=function(e,t){return v(e,t,!1)},A.without=p(function(e,t){return A.difference(e,t)}),A.uniq=A.unique=function(e,t,n,i){A.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=_(n,i));for(var r=[],o=[],a=0,s=S(e);a<s;a++){var l=e[a],d=n?n(l,a,e):l;t&&!n?(a&&o===d||r.push(l),o=d):n?A.contains(o,d)||(o.push(d),r.push(l)):A.contains(r,l)||r.push(l)}return r},A.union=p(function(e){return A.uniq(v(e,!0,!0))}),A.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=S(e);i<r;i++){var o=e[i];if(!A.contains(t,o)){var a;for(a=1;a<n&&A.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},A.difference=p(function(e,t){return t=v(t,!0,!0),A.filter(e,function(e){return!A.contains(t,e)})}),A.unzip=function(e){for(var t=e&&A.max(e,S).length||0,n=Array(t),i=0;i<t;i++)n[i]=A.pluck(e,i);return n},A.zip=p(A.unzip),A.object=function(e,t){for(var n={},i=0,r=S(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n};var L=function(o){return function(e,t,n){t=_(t,n);for(var i=S(e),r=0<o?0:i-1;0<=r&&r<i;r+=o)if(t(e[r],r,e))return r;return-1}};A.findIndex=L(1),A.findLastIndex=L(-1),A.sortedIndex=function(e,t,n,i){for(var r=(n=_(n,i,1))(t),o=0,a=S(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<r?o=s+1:a=s}return o};var N=function(o,a,s){return function(e,t,n){var i=0,r=S(e);if("number"==typeof n)0<o?i=0<=n?n:Math.max(n+r,i):r=0<=n?Math.min(n+1,r):n+r+1;else if(s&&n&&r)return e[n=s(e,t)]===t?n:-1;if(t!=t)return 0<=(n=a(l.call(e,i,r),A.isNaN))?n+i:-1;for(n=0<o?i:r-1;0<=n&&n<r;n+=o)if(e[n]===t)return n;return-1}};A.indexOf=N(1,A.findIndex,A.sortedIndex),A.lastIndexOf=N(-1,A.findLastIndex),A.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;o<i;o++,e+=n)r[o]=e;return r},A.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(l.call(e,i,i+=t));return n};var P=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=g(e.prototype),a=e.apply(o,r);return A.isObject(a)?a:o};A.bind=p(function(t,n,i){if(!A.isFunction(t))throw new TypeError("Bind must be called on a function");var r=p(function(e){return P(t,r,n,this,i.concat(e))});return r}),A.partial=p(function(r,o){var a=A.partial.placeholder,s=function(){for(var e=0,t=o.length,n=Array(t),i=0;i<t;i++)n[i]=o[i]===a?arguments[e++]:o[i];for(;e<arguments.length;)n.push(arguments[e++]);return P(r,s,this,this,n)};return s}),(A.partial.placeholder=A).bindAll=p(function(e,t){var n=(t=v(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=A.bind(e[i],e)}}),A.memoize=function(i,r){var o=function(e){var t=o.cache,n=""+(r?r.apply(this,arguments):e);return O(t,n)||(t[n]=i.apply(this,arguments)),t[n]};return o.cache={},o},A.delay=p(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),A.defer=A.partial(A.delay,A,1),A.throttle=function(n,i,r){var o,a,s,l,d=0;r||(r={});var u=function(){d=!1===r.leading?0:A.now(),o=null,l=n.apply(a,s),o||(a=s=null)},e=function(){var e=A.now();d||!1!==r.leading||(d=e);var t=i-(e-d);return a=this,s=arguments,t<=0||i<t?(o&&(clearTimeout(o),o=null),d=e,l=n.apply(a,s),o||(a=s=null)):o||!1===r.trailing||(o=setTimeout(u,t)),l};return e.cancel=function(){clearTimeout(o),d=0,o=a=s=null},e},A.debounce=function(n,i,r){var o,a,s=function(e,t){o=null,t&&(a=n.apply(e,t))},e=p(function(e){if(o&&clearTimeout(o),r){var t=!o;o=setTimeout(s,i),t&&(a=n.apply(this,e))}else o=A.delay(s,i,this,e);return a});return e.cancel=function(){clearTimeout(o),o=null},e},A.wrap=function(e,t){return A.partial(t,e)},A.negate=function(e){return function(){return!e.apply(this,arguments)}},A.compose=function(){var n=arguments,i=n.length-1;return function(){for(var e=i,t=n[i].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},A.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},A.before=function(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},A.once=A.partial(A.before,2),A.restArguments=p;var M=!{toString:null}.propertyIsEnumerable("toString"),V=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=function(e,t){var n=V.length,i=e.constructor,r=A.isFunction(i)&&i.prototype||a,o="constructor";for(O(e,o)&&!A.contains(t,o)&&t.push(o);n--;)(o=V[n])in e&&e[o]!==r[o]&&!A.contains(t,o)&&t.push(o)};A.keys=function(e){if(!A.isObject(e))return[];if(s)return s(e);var t=[];for(var n in e)O(e,n)&&t.push(n);return M&&b(e,t),t},A.allKeys=function(e){if(!A.isObject(e))return[];var t=[];for(var n in e)t.push(n);return M&&b(e,t),t},A.values=function(e){for(var t=A.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},A.mapObject=function(e,t,n){t=_(t,n);for(var i=A.keys(e),r=i.length,o={},a=0;a<r;a++){var s=i[a];o[s]=t(e[s],s,e)}return o},A.pairs=function(e){for(var t=A.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},A.invert=function(e){for(var t={},n=A.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},A.functions=A.methods=function(e){var t=[];for(var n in e)A.isFunction(e[n])&&t.push(n);return t.sort()};var U=function(l,d){return function(e){var t=arguments.length;if(d&&(e=Object(e)),t<2||null==e)return e;for(var n=1;n<t;n++)for(var i=arguments[n],r=l(i),o=r.length,a=0;a<o;a++){var s=r[a];d&&void 0!==e[s]||(e[s]=i[s])}return e}};A.extend=U(A.allKeys),A.extendOwn=A.assign=U(A.keys),A.findKey=function(e,t,n){t=_(t,n);for(var i,r=A.keys(e),o=0,a=r.length;o<a;o++)if(t(e[i=r[o]],i,e))return i};var k,w,F=function(e,t,n){return t in n};A.pick=p(function(e,t){var n={},i=t[0];if(null==e)return n;A.isFunction(i)?(1<t.length&&(i=f(i,t[1])),t=A.allKeys(e)):(i=F,t=v(t,!1,!1),e=Object(e));for(var r=0,o=t.length;r<o;r++){var a=t[r],s=e[a];i(s,a,e)&&(n[a]=s)}return n}),A.omit=p(function(e,n){var t,i=n[0];return A.isFunction(i)?(i=A.negate(i),1<n.length&&(t=n[1])):(n=A.map(v(n,!1,!1),String),i=function(e,t){return!A.contains(n,t)}),A.pick(e,i,t)}),A.defaults=U(A.allKeys,!0),A.create=function(e,t){var n=g(e);return t&&A.extendOwn(n,t),n},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e},A.tap=function(e,t){return t(e),e},A.isMatch=function(e,t){var n=A.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;o<i;o++){var a=n[o];if(t[a]!==r[a]||!(a in r))return!1}return!0},k=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&w(e,t,n,i)},w=function(e,t,n,i){e instanceof A&&(e=e._wrapped),t instanceof A&&(t=t._wrapped);var r=E.call(e);if(r!==E.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(t)}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(A.isFunction(a)&&a instanceof a&&A.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!k(e[l],t[l],n,i))return!1}else{var d,u=A.keys(e);if(l=u.length,A.keys(t).length!==l)return!1;for(;l--;)if(d=u[l],!O(t,d)||!k(e[d],t[d],n,i))return!1}return n.pop(),i.pop(),!0},A.isEqual=function(e,t){return k(e,t)},A.isEmpty=function(e){return null==e||(y(e)&&(A.isArray(e)||A.isString(e)||A.isArguments(e))?0===e.length:0===A.keys(e).length)},A.isElement=function(e){return!(!e||1!==e.nodeType)},A.isArray=n||function(e){return"[object Array]"===E.call(e)},A.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},A.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){A["is"+t]=function(e){return E.call(e)==="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(e){return O(e,"callee")});var G=e.document&&e.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof G&&(A.isFunction=function(e){return"function"==typeof e||!1}),A.isFinite=function(e){return!A.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},A.isNaN=function(e){return A.isNumber(e)&&isNaN(e)},A.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===E.call(e)},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e},A.has=function(e,t){if(!A.isArray(t))return O(e,t);for(var n=t.length,i=0;i<n;i++){var r=t[i];if(null==e||!o.call(e,r))return!1;e=e[r]}return!!n},A.noConflict=function(){return e._=t,this},A.identity=function(e){return e},A.constant=function(e){return function(){return e}},A.noop=function(){},A.property=function(t){return A.isArray(t)?function(e){return I(e,t)}:T(t)},A.propertyOf=function(t){return null==t?function(){}:function(e){return A.isArray(e)?I(t,e):t[e]}},A.matcher=A.matches=function(t){return t=A.extendOwn({},t),function(e){return A.isMatch(e,t)}},A.times=function(e,t,n){var i=Array(Math.max(0,e));t=f(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},A.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},A.now=Date.now||function(){return(new Date).getTime()};var Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=A.invert(Y),x=function(t){var n=function(e){return t[e]},e="(?:"+A.keys(t).join("|")+")",i=RegExp(e),r=RegExp(e,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,n):e}};A.escape=x(Y),A.unescape=x(H),A.result=function(e,t,n){A.isArray(t)||(t=[t]);var i=t.length;if(!i)return A.isFunction(n)?n.call(e):n;for(var r=0;r<i;r++){var o=null==e?void 0:e[t[r]];void 0===o&&(o=n,r=i),e=A.isFunction(o)?o.call(e):o}return e};var B=0;A.uniqueId=function(e){var t=++B+"";return e?e+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+j[e]};A.template=function(o,e,t){!e&&t&&(e=t),e=A.defaults({},e,A.templateSettings);var n,i=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),a=0,s="__p+='";o.replace(i,function(e,t,n,i,r){return s+=o.slice(a,r).replace(K,q),a=r+e.length,t?s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(e.variable||"obj","_",s)}catch(e){throw e.source=s,e}var r=function(e){return n.call(this,e,A)},l=e.variable||"obj";return r.source="function("+l+"){\n"+s+"}",r},A.chain=function(e){var t=A(e);return t._chain=!0,t};var Q=function(e,t){return e._chain?A(t).chain():t};A.mixin=function(n){return A.each(A.functions(n),function(e){var t=A[e]=n[e];A.prototype[e]=function(){var e=[this._wrapped];return r.apply(e,arguments),Q(this,t.apply(A,e))}}),A},A.mixin(A),A.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];A.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],Q(this,e)}}),A.each(["concat","join","slice"],function(e){var t=i[e];A.prototype[e]=function(){return Q(this,t.apply(this._wrapped,arguments))}}),A.prototype.value=function(){return this._wrapped},A.prototype.valueOf=A.prototype.toJSON=A.prototype.value,A.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return A})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"use strict";e("../html5-common/js/utils/InitModules/InitOOUnderscore.js"),e("../html5-common/js/utils/constants.js"),e("../html5-common/js/utils/utils.js"),function(s,l){var me={};OO.Ads.manager(function(ge,Te){var Oe=function(){return!(OO.iosMajorVersion<10&&OO.isIphone)},Ie=function(e){throw new Error("GOOGLE IMA: "+e)};return new function(){this.name="google-ima-ads-manager",this.ready=!1,this.runningUnitTests=!1,this.sharedVideoElement=null,this.initTime=Date.now(),this.enableIosSkippableAds=!1;var s,u,l,c,t,o,E,A=null,n=!1,e=null,d=null,i=null,r=!1,a=null,h=null,f=(OO.CSS.VISIBLE_POSITION,{left:OO.CSS.INVISIBLE_POSITION,visibility:"hidden"}),_="ooyalaImaPluginTimeout",p=ge.bind(function(e){if(ge.isFunction(e))return ge.bind(e,this);Ie("Error: Trying to make private function but "+e+" is not a function.")},this);this.initialize=function(e,t){me[t]=this,A=e;var n="//imasdk.googleapis.com/js/sdkloader/ima3"+(OO.DEBUG?"_debug.js":".js");g(),T(),this.runningUnitTests?w(!0):A.loadAdModule(this.name,n,w)};var g=p(function(){this.ready=!1,u=!0,this.startImaOnVtcPlay=!1,this.capturedUserClick=!1,this.initialPlayRequestTime=-1,this.adRequestTime=-1,this.adResponseTime=-1,this.mainContentDuration=0,this.initialPlayRequested=!1,this.canSetupAdsRequest=!0,this.adTagUrl=null,this.currentMedia=null,this.currentImpressionTime=0,this.adFinalTagUrl=null,this.adPosition=-1,this.adsReady=!1,this.additionalAdTagParameters=null,this.adsRequested=!1,this.adsRequestTimeoutRef=null,this.disableFlashAds=!1,this.contentEnded=!1,this.pauseAdOnClick=null,this.isFullscreen=!1,this.maxAdsRequestTimeout=15e3,this.uiRegistered=!1,this.metadataReady=!1,this.allAdInfo=null,this.currentAMCAdPod=null,this.currentIMAAd=null,this.currentNonLinearIMAAd=null,this.isReplay=!1,this.requestAdsOnReplay=!0,this.preloadAds=!1,E=!1,b(),this.hasPreroll=!1,this.adPlaybackStarted=!1,this.savedVolume=-1,this.showAdControls=!1,this.useGoogleAdUI=!1,this.useGoogleCountdown=!1,this.useInsecureVpaidMode=!1,this.imaIframeZIndex=10004,this.adRulesLoadError=!1,t=!1,o=c=l=h=a=null}),T=p(function(){A.addPlayerListener(A.EVENTS.INITIAL_PLAY_REQUESTED,D),A.addPlayerListener(A.EVENTS.CONTENT_COMPLETED,L),A.addPlayerListener(A.EVENTS.PLAYHEAD_TIME_CHANGED,N),A.addPlayerListener(A.EVENTS.SIZE_CHANGED,M),A.addPlayerListener(A.EVENTS.CONTENT_CHANGED,de),A.addPlayerListener(A.EVENTS.REPLAY_REQUESTED,S),A.addPlayerListener(A.EVENTS.FULLSCREEN_CHANGED,P)}),O=p(function(){A&&(A.removePlayerListener(A.EVENTS.INITIAL_PLAY_REQUESTED,D),A.removePlayerListener(A.EVENTS.CONTENT_COMPLETED,L),A.removePlayerListener(A.EVENTS.PLAYHEAD_TIME_CHANGED,N),A.removePlayerListener(A.EVENTS.SIZE_CHANGED,M),A.removePlayerListener(A.EVENTS.CONTENT_CHANGED,de),A.removePlayerListener(A.EVENTS.REPLAY_REQUESTED,S),A.removePlayerListener(A.EVENTS.FULL_SCREEN_CHANGED,P))});this.loadMetadata=function(e,t,n){this.mainContentDuration=n.duration/1e3,this.allAdInfo=e.all_ads;var i=ge.find(e.all_ads,function(e){return"r"==e.position_type});u=!!i,this.adRulesLoadError=!1,this.adTagUrl=null,u&&(this.adTagUrl=i.tag_url,this.adPosition=0),this.requestAdsOnReplay=!0,A.adManagerSettings.hasOwnProperty(A.AD_SETTINGS.REPLAY_ADS)&&(this.requestAdsOnReplay=A.adManagerSettings[A.AD_SETTINGS.REPLAY_ADS]),this.preloadAds=!1,A.adManagerSettings.hasOwnProperty(A.AD_SETTINGS.PRELOAD_ADS)&&(this.preloadAds=A.adManagerSettings[A.AD_SETTINGS.PRELOAD_ADS]),this.maxAdsRequestTimeout=15e3,ge.isFinite(A.adManagerSettings[A.AD_SETTINGS.AD_LOAD_TIMEOUT])&&(0<A.adManagerSettings[A.AD_SETTINGS.AD_LOAD_TIMEOUT]||this.runningUnitTests)&&(this.maxAdsRequestTimeout=A.adManagerSettings[A.AD_SETTINGS.AD_LOAD_TIMEOUT]),this.additionalAdTagParameters=null,e.hasOwnProperty("additionalAdTagParameters")&&(this.additionalAdTagParameters=e.additionalAdTagParameters),this.showAdControls=!1,this.playerControlsOverAds=A.pageSettings&&!0===A.pageSettings.playerControlsOverAds,this.playerControlsOverAds?this.showAdControls=!0:e.hasOwnProperty("showAdControls")&&(this.showAdControls=e.showAdControls),this.autoHideAdControls=!0,this.showAdControls&&!this.playerControlsOverAds&&(this.autoHideAdControls=!1),this.useGoogleAdUI=!1,e.hasOwnProperty("useGoogleAdUI")&&(this.useGoogleAdUI=e.useGoogleAdUI),this.useGoogleCountdown=!1,e.hasOwnProperty("useGoogleCountdown")&&(this.useGoogleCountdown=e.useGoogleCountdown),this.useInsecureVpaidMode=!1,e.hasOwnProperty("vpaidMode")&&(this.useInsecureVpaidMode="insecure"===e.vpaidMode),this.disableFlashAds=!1,e.hasOwnProperty("disableFlashAds")&&(this.disableFlashAds=e.disableFlashAds),this.imaIframeZIndex=10004,e.hasOwnProperty("iframeZIndex")&&(this.imaIframeZIndex=e.iframeZIndex),this.enableIosSkippableAds=!1,e.hasOwnProperty("enableIosSkippableAds")&&(this.enableIosSkippableAds=e.enableIosSkippableAds),e.hasOwnProperty("setMaxRedirects")&&("number"==typeof e.setMaxRedirects?this.maxRedirects=e.setMaxRedirects:"string"==typeof e.setMaxRedirects&&(this.maxRedirects=+e.setMaxRedirects)),o?l||G():F(),this.metadataReady=!0,B();var r=I();r&&0<r.length&&u&&(this.canSetupAdsRequest=!1)},this.registerUi=function(){this.uiRegistered=!0,A.ui.useSingleVideoElement&&!this.sharedVideoElement&&A.ui.ooyalaVideoElement[0]&&"video"===A.ui.ooyalaVideoElement[0].className&&this.setupSharedVideoElement(A.ui.ooyalaVideoElement[0]),F(),U()},this.setupSharedVideoElement=function(e){this.sharedVideoElement&&OO.isIphone&&"function"==typeof this.sharedVideoElement.removeEventListener&&this.sharedVideoElement.removeEventListener("webkitendfullscreen",J),this.sharedVideoElement=e,this.sharedVideoElement&&OO.isIphone&&"function"==typeof this.sharedVideoElement.addEventListener&&this.sharedVideoElement.addEventListener("webkitendfullscreen",J)},this.buildTimeline=function(){var e=[];if(u)return(r={})[OO.VIDEO.ENCODING.IMA]="",[new A.Ad({position:0,duration:0,adManager:this.name,ad:{},streams:r,adType:A.ADTYPE.UNKNOWN_AD_REQUEST})];var t=I();if(t)for(var n=0;n<t.length;n++){var i=t[n];if("r"!=i.position_type){var r;(r={})[OO.VIDEO.ENCODING.IMA]="";var o={position:i.position/1e3,adManager:this.name,ad:i,streams:r,adType:A.ADTYPE.UNKNOWN_AD_REQUEST,mainContentDuration:this.mainContentDuration};"p"===i.position_type&&(o.positionType="p",o.position=i.position);var a=new A.Ad(o);e.push(a)}}return e};var I=p(function(){return this.allAdInfo?ge.filter(this.allAdInfo,m):null}),m=p(function(e){if(!e)return!1;var t=e.tag_url,n="r"==e.position_type;return u==n&&t&&"string"==typeof t});this.playAd=function(e,t){if(null!=e)if(t?h=e:a=e,h!==e||this.currentAMCAdPod!==e){this.currentAMCAdPod&&_e(!0),this.currentAMCAdPod=e,this.currentAMCAdPod?this.currentAMCAdPod.ad||Ie("playAd() called but amcAdPod.ad is null."):Ie("playAd() called but amcAdPod is null.");var n=ae();n&&n.style&&(n.style.zIndex=this.imaIframeZIndex),u&&this.currentAMCAdPod.adType==A.ADTYPE.UNKNOWN_AD_REQUEST?t&&(this.canSetupAdsRequest=!0,U()):(!A.ui.useSingleVideoElement&&A.ui.adVideoElement&&A.ui.adVideoElement.css(f),u&&this.currentAMCAdPod.ad.forced_ad_type!==A.ADTYPE.NONLINEAR_OVERLAY?ue():this.currentAMCAdPod.ad.forced_ad_type!=A.ADTYPE.NONLINEAR_OVERLAY?(y(),this.adTagUrl=this.currentAMCAdPod.ad.tag_url,this.adPosition=this.currentAMCAdPod.ad.position/1e3,U()):(this.currentAMCAdPod&&this.currentNonLinearIMAAd&&(this.currentAMCAdPod.width=this.currentNonLinearIMAAd.getWidth(),this.currentAMCAdPod.height=this.currentNonLinearIMAAd.getHeight(),this.currentAMCAdPod.paddingWidth=50,this.currentAMCAdPod.paddingHeight=50,M()),A.sendURLToLoadAndPlayNonLinearAd(this.currentAMCAdPod,this.currentAMCAdPod.id,null)))}else t||(a=this.currentAMCAdPod,this.adsReady&&v())},this.cancelOverlay=function(e){this.cancelAd(e)},this.cancelAd=function(e){e&&this.currentAMCAdPod&&e.id!=this.currentAMCAdPod.id&&Ie("AMC canceling ad that is not the current one playing."),OO.log("GOOGLE IMA: ad got canceled by AMC"),u||x(),_e(!0)},this.pauseAd=function(e){c&&this.adPlaybackStarted&&c.pause()},this.resumeAd=function(e){this.startImaOnVtcPlay?(this.startImaOnVtcPlay=!1,c&&c.start()):c&&this.adPlaybackStarted&&(OO.isIphone&&this.sharedVideoElement&&(Oe()||this.sharedVideoElement.webkitEnterFullscreen(),this.sharedVideoElement.play()),c.resume())},this.getVolume=function(){var e=1;return c&&(e=c.getVolume()),e},this.setVolume=function(e){c?c.getVolume()===e||!this.capturedUserClick&&0!==e&&this.requiresMutedAutoplay()||(this.savedVolume=-1,c.setVolume(e),!this.videoControllerWrapper||this.adPlaybackStarted&&!this.sharedVideoElement||this.videoControllerWrapper.raiseVolumeEvent()):this.savedVolume=e},this.setupUnmutedPlayback=function(){this.capturedUserClick=!0,this.currentIMAAd||o&&o.initialize()},this.getCurrentTime=function(){var e=0;return c&&this.currentIMAAd&&0<=c.getRemainingTime()&&c.getRemainingTime()<=this.currentIMAAd.getDuration()&&(e=this.currentIMAAd.getDuration()-c.getRemainingTime()),e},this.getDuration=function(){var e=0;return this.currentIMAAd&&(e=this.currentIMAAd.getDuration()),e},this.adVideoFocused=function(){};var S=p(function(){l||G(),this.isReplay=!0,y(),b(),this.contentEnded=!1,this.adRulesLoadError=!1,u&&U()}),y=p(function(){oe(),x(),l&&l.contentComplete(),this.currentIMAAd=null,this.currentNonLinearIMAAd=null,this.adsRequested=!1}),D=p(function(e,t){this.initialPlayRequestTime=(new Date).valueOf(),OO.log("_onInitialPlayRequested"),o||(j(),A.unregisterAdManager(this.name),Ie("onInitialPlayRequested called but _IMAAdDisplayContainer not created yet.")),this.initialPlayRequested=!0,this.isReplay=!1,o.initialize(),this.capturedUserClick=this.capturedUserClick||!t,u&&c&&c.init(d.clientWidth,d.clientHeight,google.ima.ViewMode.NORMAL),v(),this.canSetupAdsRequest=!0,U()}),C=p(function(){var e=!1,t=u&&!this.hasPreroll&&this.currentAMCAdPod&&this.currentAMCAdPod.adType===A.ADTYPE.UNKNOWN_AD_REQUEST;return this.willPlayAdMuted()&&this.videoControllerWrapper&&!t&&(this.startImaOnVtcPlay=!0,this.videoControllerWrapper.raiseUnmutedPlaybackFailed(),e=!0),e}),R=p(function(){!C()&&c&&(OO.log("Starting IMA Ads Manager"),c.start())}),v=p(function(){var e=this.currentAMCAdPod&&a===this.currentAMCAdPod||u;if(c&&this.initialPlayRequested&&!t&&d&&e)try{R(),t=!(a=null),u&&!this.hasPreroll&&this.currentAMCAdPod&&this.currentAMCAdPod.adType===A.ADTYPE.UNKNOWN_AD_REQUEST&&(A.notifyPodStarted(this.currentAMCAdPod.id,1),_e(!0))}catch(e){j(e)}}),L=p(function(){0==this.contentEnded&&(this.contentEnded=!0,l&&l.contentComplete())}),N=p(function(e,t,n){s||b(),E||(s.currentTime=t,s.duration=n)}),P=p(function(e,t){this.isFullscreen=t,M()}),M=p(function(){V()}),V=p(function(){if(c&&d){var e=this.isFullscreen?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,t=d.clientWidth,n=d.clientHeight;this.currentAMCAdPod&&this.currentNonLinearIMAAd&&(this.currentAMCAdPod.width&&(t=this.currentAMCAdPod.width,this.currentAMCAdPod.paddingWidth&&(t+=this.currentAMCAdPod.paddingWidth)),this.currentAMCAdPod.height&&(n=this.currentAMCAdPod.height,this.currentAMCAdPod.paddingHeight&&(n+=this.currentAMCAdPod.paddingHeight))),c.resize(t,n,e)}}),b=p(function(){s?s.currentTime=0:s={duration:0,currentTime:0}}),U=p(function(){if(!this.adsRequested&&this.canSetupAdsRequest&&this.adTagUrl&&this.uiRegistered&&A.currentEmbedCode&&l&&k()){google&&google.ima&&google.ima.settings&&google.ima.settings.setDisableFlashAds(this.disableFlashAds);var e=new google.ima.AdsRequest;if(this.additionalAdTagParameters){var t=0<this.adTagUrl.indexOf("?")?"&":"?",n=[],i=null;for(i in this.additionalAdTagParameters)n.push(i+"="+this.additionalAdTagParameters[i]);this.adTagUrl+=t+n.join("&")}e.adTagUrl=OO.getNormalizedTagUrl(this.adTagUrl,A.currentEmbedCode),this.adFinalTagUrl=e.adTagUrl;var r=A.ui.width,o=A.ui.height;e.linearAdSlotWidth=r,e.linearAdSlotHeight=o,e.nonLinearAdSlotWidth=r,e.nonLinearAdSlotHeight=o;var a=this.willPlayAdMuted();OO.log("IMA: setAdWillPlayMuted = "+a),e.setAdWillPlayMuted(a),y(),re(),l.requestAds(e),this.adRequestTime=(new Date).valueOf(),A.onAdRequest(this.name,this.adPosition),this.runningUnitTests&&0===this.maxAdsRequestTimeout?W():this.adsRequestTimeoutRef=ge.delay(W,this.maxAdsRequestTimeout),this.adsRequested=!0}}),k=p(function(){return!this.isReplay||this.requestAdsOnReplay}),w=p(function(e){if(n=e,OO.log("onSdkLoaded!"),!e||!pe())return j(),errorString="ERROR Google SDK failed to load",e&&!pe()&&(errorString="ERROR Google SDK loaded but could not be validated"),A.onAdSdkLoadFailure(this.name,errorString),void A.unregisterAdManager(this.name);A.onAdSdkLoaded(this.name),F(),U()}),F=p(function(){if(n&&this.uiRegistered){if(pe()||Ie("IMA SDK loaded but does not contain valid data"),!o){google.ima.settings.setPlayerVersion("1.0"),google.ima.settings.setPlayerType("Ooyala"),A.uiLanguage?google.ima.settings.setLocale(A.uiLanguage):google.ima.settings.setLocale(OO.getLocale()),this.useInsecureVpaidMode?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE):google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.enableIosSkippableAds),this.maxRedirects&&"number"==typeof this.maxRedirects&&0<this.maxRedirects&&google.ima.settings.setNumRedirects(this.maxRedirects),d=A.ui.playerSkinPluginsElement?A.ui.playerSkinPluginsElement[0]:A.ui.pluginsElement[0];var e=this.sharedVideoElement;o=new google.ima.AdDisplayContainer(d,e)}G(),B()}}),G=p(function(){if(o){var e=google.ima.AdsManagerLoadedEvent.Type,t=google.ima.AdErrorEvent.Type;H(),(l=new google.ima.AdsLoader(o)).addEventListener(e.ADS_MANAGER_LOADED,K,!1),l.addEventListener(t.AD_ERROR,j,!1)}}),Y=p(function(){o&&(o.destroy(),o=null,this.capturedUserClick=!1)}),H=p(function(){l&&(l.destroy(),l=null)}),x=p(function(){c&&(c.stop(),c.destroy(),c=null,t=!1)});this.destroy=function(){d=null,oe(),x(),H(),Y(),g(),O()},this.createAdVideoElementOnPlayerInit=function(){return[OO.VIDEO.ENCODING.IMA]};var B=p(function(){o&&this.metadataReady&&!this.ready&&(this.ready=!0,A.onAdManagerReady(),A.reportPluginLoaded(Date.now()-this.initTime,this.name))}),W=p(function(){OO.log("IMA Ad request timed out"),this.adsReady||j(_)}),j=p(function(e){if(clearTimeout(this.adsRequestTimeoutRef),u&&(this.adsReady||(this.adRulesLoadError=!0),oe()),x(),e===_&&H(),e){var t="ERROR Google IMA";if(e.getError){var n=e.getError(),i=!1,r=!1,o=!1,a={vastErrorCode:n.getVastErrorCode(),innerErrorCode:n.getInnerError(),errorCode:n.getErrorCode()};OO.log("GOOGLE_IMA:: SDK Error received: Error Code List",JSON.stringify(a));var s=google.ima.AdError.ErrorCode;switch(a.vastErrorCode){case s.VAST_MEDIA_LOAD_TIMEOUT:case s.VAST_LOAD_TIMEOUT:i=!0;break;case s.VAST_NO_ADS_AFTER_WRAPPER:case s.VAST_EMPTY_RESPONSE:r=!0;break;case s.VAST_MEDIA_ERROR:case s.VIDEO_PLAY_ERROR:o=!0}a.errorCode==s.VIDEO_PLAY_ERROR&&(o=!0),A.onSdkAdEvent(this.name,e.type,{errorData:n}),r?A.onAdRequestEmpty(this.name,this.adPosition,this.adFinalTagUrl,a,n.getMessage()):o?A.onAdPlaybackError(this.name,this.adPosition,this.adFinalTagUrl,a,n.getMessage(),this.currentMedia):A.onAdRequestError(this.name,this.adPosition,this.adFinalTagUrl,a,n.getMessage(),i),t="ERROR Google SDK: "+e.getError()}else t="ERROR Google IMA plugin: "+e;A?A.raiseAdError(t):OO.log(t)}_e(!0)}),K=p(function(e){clearTimeout(this.adsRequestTimeoutRef),this.adResponseTime=(new Date).valueOf();var t=this.adResponseTime-this.adRequestTime,n=this.adResponseTime-this.initialPlayRequestTime;A.onAdRequestSuccess(this.name,this.adPosition,t,n),A.onSdkAdEvent(this.name,e.type,{eventData:{}}),!u&&c&&(x(),this.currentIMAAd=null,this.currentNonLinearIMAAd=null);var i=new google.ima.AdsRenderingSettings;i.loadVideoTimeout=15e3,i.restoreCustomPlaybackStateOnAdBreakComplete=!1,i.useStyledNonLinearAds=!0,i.enablePreloading=this.preloadAds,this.useGoogleCountdown&&(i.uiElements=[google.ima.UiElements.COUNTDOWN,google.ima.UiElements.AD_ATTRIBUTION]),i.useStyledLinearAds=this.useGoogleAdUI,c=e.getAdsManager(s,i),this.videoControllerWrapper&&(this.videoControllerWrapper.readyForCss=!0),this.videoControllerWrapper&&this.videoControllerWrapper.applyStoredCss();var r=c.getCuePoints();this.hasPreroll=0<=r.indexOf(0);var o=google.ima.AdEvent.Type;c.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,j,!1,this);var a=[o.AD_BREAK_READY,o.AD_METADATA,o.ALL_ADS_COMPLETED,o.CLICK,o.COMPLETE,o.CONTENT_PAUSE_REQUESTED,o.CONTENT_RESUME_REQUESTED,o.DURATION_CHANGE,o.FIRST_QUARTILE,o.IMPRESSION,o.INTERACTION,o.LINEAR_CHANGED,o.LOADED,o.LOG,o.MIDPOINT,o.PAUSED,o.RESUMED,o.SKIPPABLE_STATE_CHANGED,o.SKIPPED,o.STARTED,o.THIRD_QUARTILE,o.USER_CLOSE,o.VOLUME_CHANGED,o.VOLUME_MUTED];OO._.each(a,function(e){c.addEventListener(e,$,!1,this)},this),OO.isIos&&se(),u&&!this.initialPlayRequested||c.init(d.clientWidth,d.clientHeight,google.ima.ViewMode.NORMAL),B(),this.adsReady=!0,v()}),q=p(function(e){OO.log("GOOGLE_IMA:: starting playlist ad"),u&&(this.currentAMCAdPod&&this.currentNonLinearIMAAd&&this.cancelAd(this.currentAMCAdPod),i=d.getAttribute("style")||"",d.setAttribute("style","display: block; width: 100%; height: 100%; visibility: hidden; pointer-events: none;"),M(),C())}),Q=p(function(e){A.adsClicked(),A.adsClickthroughOpened()}),z=p(function(){if(OO.log("GOOGLE_IMA:: Content Pause Requested by Google IMA!"),E=!0,u){var e={position_type:"r",forced_ad_type:A.ADTYPE.LINEAR_VIDEO},t={};if(t[OO.VIDEO.ENCODING.IMA]="",s.currentTime<=0){var n={position:A.FORCED_AD_POSITION,adManager:this.name,ad:e,streams:t,adType:A.ADTYPE.LINEAR_VIDEO,mainContentDuration:this.mainContentDuration};A.appendToTimeline([new A.Ad(n)]),_e(!0)}else A.forceAdToPlay(this.name,e,A.ADTYPE.LINEAR_VIDEO,t)}}),X=p(function(){OO.log("GOOGLE_IMA:: Content Resume Requested by Google IMA!"),_e(!0)}),J=p(function(){this.videoControllerWrapper&&this.videoControllerWrapper.raisePauseEvent()}),Z=p(function(e){if(e&&A.pageSettings.companionAd&&A.pageSettings.companionAd.slots){var t=A.pageSettings.companionAd.slots,n=[],i=null;ge.each(t,function(t){t.width&&t.height&&(i=e.getCompanionAds(t.width,t.height)).length&&ge.each(i,function(e){n.push({slotSize:t.width+"x"+t.height,ad:e.getContent()})})}),n.length&&A.showCompanion(n)}}),$=p(function(e){if(ee(e))OO.log("Ignoring IMA EVENT: ",e.type,e);else{A.onSdkAdEvent(this.name,e.type,{adData:e.getAdData()});var t=google.ima.AdEvent.Type,n=e.getAd();switch(e.getAdData(),e.type){case t.LOADED:q(e),A.ui.useSingleVideoElement&&A.focusAdVideo(),this.currentMedia=n.getMediaUrl(),te();break;case t.STARTED:if(OO.isIos){var i=ae();i&&i.style&&(i.style.display="block")}this.videoControllerWrapper&&this.requiresMutedAutoplay()&&this.videoControllerWrapper.raiseVolumeEvent(),this.adPlaybackStarted=!0,n.isLinear()?(E=!0,A.ui.useSingleVideoElement||A.focusAdVideo(),0<=this.savedVolume&&(this.setVolume(this.savedVolume),this.savedVolume=-1),A.hidePlayerUi(this.showAdControls,!1,this.autoHideAdControls),Oe()&&OO.isIphone&&!0===this.enableIosSkippableAds&&this.sharedVideoElement&&this.sharedVideoElement.webkitExitFullscreen()):this.currentNonLinearIMAAd=n,this.currentIMAAd=n,M(),ue(),this.videoControllerWrapper&&(n.isLinear()&&this.videoControllerWrapper.raisePlayEvent(),this.videoControllerWrapper.raiseTimeUpdate(this.getCurrentTime(),this.getDuration()),ne()),u&&!n.isLinear()&&Ae();break;case t.RESUMED:this.videoControllerWrapper&&n.isLinear()&&this.videoControllerWrapper.raisePlayEvent();break;case t.USER_CLOSE:case t.SKIPPED:case t.COMPLETE:OO.isIos&&se(),u&&(this.adResponseTime=(new Date).valueOf());var r=!1;e.type===t.SKIPPED&&(r=!0);var o=(new Date).valueOf()-this.currentImpressionTime;if(A.onAdCompleted(this.name,o,r,this.adFinalTagUrl),this.adPlaybackStarted=!1,this.videoControllerWrapper&&n&&n.isLinear()){ie();var a=e.type===t.COMPLETE?this.getDuration():this.getCurrentTime();this.videoControllerWrapper.raiseTimeUpdate(a,this.getDuration()),this.videoControllerWrapper.raiseEndedEvent()}this.savedVolume=this.getVolume(),n&&n.isLinear()||(this.currentNonLinearIMAAd=null),_e(!1),E=!1,le(e);break;case t.PAUSED:J();break;case t.ALL_ADS_COMPLETED:E=!1,OO.log("all google ima ads completed!"),oe(),OO.isIos&&this.contentEnded&&A.isLastAdPlayed()&&X();break;case t.IMPRESSION:this.currentImpressionTime=(new Date).valueOf();var s=this.currentImpressionTime-this.adResponseTime,l="VAST";n&&n.g&&!0===n.g.vpaid&&(l="VPAID");var d="unknown";d=n&&n.isLinear()?0===n.getContentType().lastIndexOf("video",0)?A.ADTYPE.LINEAR_VIDEO:A.ADTYPE.LINEAR_OVERLAY:n&&0===n.getContentType().lastIndexOf("video",0)?A.ADTYPE.NONLINEAR_VIDEO:A.ADTYPE.NONLINEAR_OVERLAY,A.onAdSdkImpression(this.name,this.adPosition,s,l,d);break;case t.FIRST_QUARTILE:case t.MIDPOINT:case t.THIRD_QUARTILE:le(e);break;case t.VOLUME_CHANGED:case t.VOLUME_MUTED:e.type!==t.VOLUME_MUTED||this.adPlaybackStarted||c.resume(),this.videoControllerWrapper&&this.videoControllerWrapper.raiseVolumeEvent();break;case t.DURATION_CHANGE:this.videoControllerWrapper&&this.videoControllerWrapper.raiseDurationChange(this.getCurrentTime(),this.getDuration());break;case t.AD_BREAK_READY:break;case t.CLICK:Q(e);break;case t.CONTENT_PAUSE_REQUESTED:u&&n&&0!=n.getAdPodInfo().getPodIndex()&&(this.adResponseTime=(new Date).valueOf()),z(e);break;case t.CONTENT_RESUME_REQUESTED:X(e)}}}),ee=p(function(e){var t=google.ima.AdEvent.Type,n=[t.COMPLETE,t.SKIPPED,t.FIRST_QUARTILE,t.MIDPOINT,t.PAUSED,t.RESUMED,t.THIRD_QUARTILE,t.USER_CLOSE];return!e||!this.adPlaybackStarted&&ge.contains(n,e.type)}),te=p(function(){d&&null!=i&&d.setAttribute("style",i),i=null}),ne=p(function(){ie(),this.runningUnitTests||(e=setInterval(ge.bind(function(){E?this.videoControllerWrapper.raiseTimeUpdate(this.getCurrentTime(),this.getDuration()):ie()},this),500))}),ie=p(function(){clearInterval(e),e=null}),re=p(function(){u&&A.adManagerWillControlAds(this.name)}),oe=p(function(){u&&A&&A.adManagerDoneControllingAds(this.name)}),ae=p(function(){var e=null;return d&&(e=Te(d).find("iframe")[0]),e}),se=p(function(){var e=ae();e&&e.style&&(e.style.display="none")}),le=p(function(e){OO.log("Google IMA Ad playthrough",e.type)}),de=p(function(){this.contentEnded=!1,oe(),y(),b()}),ue=p(function(){var e=null;return this.currentIMAAd&&this.currentAMCAdPod&&(this.currentIMAAd.isLinear()?(e=A.ADTYPE.LINEAR_VIDEO,ce()):(e=A.ADTYPE.NONLINEAR_OVERLAY,Ee())),e}),ce=p(function(){this.currentIMAAd||Ie("Trying to start linear ad and this.currentIMAAd is falsy"),this.currentAMCAdPod||Ie("Trying to start linear ad and this.currentAMCAdPod is falsy");var e=this.currentAMCAdPod.id,t={},n=1;t.indexInPod=1,t.name=null,t.duration=0,t.hasClickUrl=!1,t.skippable=!1;try{var i=this.currentIMAAd.getAdPodInfo();n=i.getTotalAds(),t.indexInPod=i.getAdPosition()}catch(e){Ie("IMA ad returning bad value for this.currentIMAAd.getAdPodInfo().")}"function"==typeof this.currentIMAAd.getTitle&&(t.name=this.currentIMAAd.getTitle()),"function"==typeof this.currentIMAAd.getDuration&&(t.duration=this.currentIMAAd.getDuration()),"function"==typeof this.currentIMAAd.isSkippable&&(t.skippable=this.currentIMAAd.isSkippable()),1==t.indexInPod&&A.notifyPodStarted(e,n),Z(this.currentIMAAd),A.notifyLinearAdStarted(e,t)}),Ee=p(function(){this.currentAMCAdPod||Ie("Trying to start non linear overlay and this.currentAMCAdPod is falsy"),A.notifyPodStarted(this.currentAMCAdPod.id);var e={position_type:"t",forced_ad_type:A.ADTYPE.NONLINEAR_OVERLAY};Z(this.currentIMAAd),_e(!0),A.forceAdToPlay(this.name,e,A.ADTYPE.NONLINEAR_OVERLAY)}),Ae=p(function(){var e={position_type:"r",forced_ad_type:A.ADTYPE.NONLINEAR_OVERLAY};Z(this.currentIMAAd),A.forceAdToPlay(this.name,e,A.ADTYPE.NONLINEAR_OVERLAY)}),he=p(function(e){A.notifyNonlinearAdEnded(e),u||y()}),fe=p(function(e){if(this.currentAMCAdPod){var t=this.currentAMCAdPod.id;this.currentAMCAdPod=null,E=!1,e?A.notifyPodEnded(t):he(t)}}),_e=p(function(e){if(this.currentAMCAdPod)if(this.currentIMAAd){var t=this.currentIMAAd;if(this.currentIMAAd=null,t.isLinear()){var n=t.getAdPodInfo();n||(e&&fe(!0),Ie("IMA ad returning bad value for this.currentIMAAd.getAdPodInfo().")),A.notifyLinearAdEnded(this.currentAMCAdPod.id);var i=n.getAdPosition(),r=n.getTotalAds();(!A.ui.useSingleVideoElement&&i==r||e)&&fe(!0)}else fe(this.currentAMCAdPod.isRequest)}else fe(!0);te(),this.currentIMAAd=null,this.adPlaybackStarted=!1}),pe=p(function(){return google&&google.ima&&google.ima.AdDisplayContainer});this.registerVideoControllerWrapper=function(e){this.videoControllerWrapper=e},this.setRequiresMutedAutoplay=function(e){r=!e},this.requiresMutedAutoplay=function(){return!r&&(OO.isSafari&&11<=OO.macOsSafariVersion||OO.isIos||OO.isAndroid||OO.isChrome&&66<=OO.chromeMajorVersion)},this.willPlayAdMuted=function(){return this.requiresMutedAutoplay()&&!this.capturedUserClick}}});var d=function(e){var n=e;this.controller={},this.disableNativeSeek=!0,this.isControllingVideo=!0,this.readyForCss=!1;var t=null,i=1;this.sharedElementTake=function(){this.isControllingVideo=!0},this.sharedElementGive=function(){this.isControllingVideo=!1},this.subscribeAllEvents=function(){n.registerVideoControllerWrapper(this)},this.setVideoUrl=function(e){return!0},this.load=function(e){},this.setInitialTime=function(e){},this.play=function(){n.resumeAd()},this.pause=function(){n.pauseAd()},this.seek=function(e){},this.mute=function(){var e=n.getVolume();e&&(i=e),n.setVolume(0)},this.unmute=function(e){e&&n.setupUnmutedPlayback(),n.setVolume(i||1)},this.setVolume=function(e,t){i=e,t?this.mute():n.setVolume(e)},this.getCurrentTime=function(){return n.getCurrentTime()},this.applyCss=function(e){this.readyForCss?r(e):t=e},this.applyStoredCss=function(){this.applyCss(t)},this.onAdsPlayed=function(){};var r=s.bind(function(e){e&&this.isControllingVideo&&n.sharedVideoElement&&l(n.sharedVideoElement).css(e)},this);this.destroy=function(){n.sharedVideoElement=null};var o=s.bind(function(e,t){this.isControllingVideo&&this.controller.notify(e,t)},this);this.raisePlayEvent=function(){o(this.controller.EVENTS.PLAY,{}),o(this.controller.EVENTS.PLAYING)},this.raiseEndedEvent=function(){o(this.controller.EVENTS.ENDED)},this.raisePauseEvent=function(){o(this.controller.EVENTS.PAUSED)},this.raiseVolumeEvent=function(){var e=n.getVolume();0===e?o(this.controller.EVENTS.MUTE_STATE_CHANGE,{muted:!0}):(o(this.controller.EVENTS.MUTE_STATE_CHANGE,{muted:!1}),o(this.controller.EVENTS.VOLUME_CHANGE,{volume:e}))},this.raiseTimeUpdate=function(e,t){a(this.controller.EVENTS.TIME_UPDATE,e,t)},this.raiseDurationChange=function(e,t){a(this.controller.EVENTS.DURATION_CHANGE,e,t)},this.raiseUnmutedPlaybackFailed=function(){o(this.controller.EVENTS.UNMUTED_PLAYBACK_FAILED)},this.notifyUnmutedContentAutoPlaybackSucceeded=function(){n.setRequiresMutedAutoplay(!1)};var a=s.bind(function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;o(e,{currentTime:t,duration:n,buffer:i,seekRange:{begin:0,end:0}})},this)};OO.Video.plugin(new function(){this.name="GoogleIMAVideoTech",this.encodings=[OO.VIDEO.ENCODING.IMA],this.features=[OO.VIDEO.FEATURE.VIDEO_OBJECT_SHARING_TAKE],this.technology=OO.VIDEO.TECHNOLOGY.HTML5,this.create=function(e,t,n,i,r){var o=me[r],a=new d(o);return a.controller=n,a.subscribeAllEvents(),a},this.createFromExisting=function(e,t,n){var i=me[n];i.setupSharedVideoElement(l("#"+e)[0]);var r=new d(i);return r.controller=t,r.subscribeAllEvents(),r},this.destroy=function(){this.encodings=[],this.create=function(){},this.createFromExisting=function(){}},this.maxSupportedElements=-1})}(OO._,OO.$)},{"../html5-common/js/utils/InitModules/InitOOUnderscore.js":2,"../html5-common/js/utils/constants.js":3,"../html5-common/js/utils/utils.js":4}]},{},[6]);